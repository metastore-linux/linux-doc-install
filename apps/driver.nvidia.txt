#!/bin/bash

# -------------------------------------------------------------------------------------------------------------------- #
# Install NVIDIA driver.
# -------------------------------------------------------------------------------------------------------------------- #
# @author Kitsune Solar <http://kitsune.solar>
# @version 1.0.0
# -------------------------------------------------------------------------------------------------------------------- #

# -------------------------------------------------------------------------------------------------------------------- #
# Script: Settings.
# -------------------------------------------------------------------------------------------------------------------- #

# Fedora version.
srvFcVer="$(rpm -E %fedora)"

# Apps.
srvPkgApps="nvidia-driver dkms-nvidia kernel-devel"

# -------------------------------------------------------------------------------------------------------------------- #
# -----------------------------------------------------< SCRIPT >----------------------------------------------------- #
# -------------------------------------------------------------------------------------------------------------------- #

# -------------------------------------------------------------------------------------------------------------------- #
# Script: Install "RPMFusion" repository.
# -------------------------------------------------------------------------------------------------------------------- #

for type in free nonfree; do
  dnf install -y https://mirror.yandex.ru/fedora/rpmfusion/${type}/fedora/rpmfusion-${type}-release-${srvFcVer}.noarch.rpm
done

# -------------------------------------------------------------------------------------------------------------------- #
# Script: Install "negativo17" repository.
# -------------------------------------------------------------------------------------------------------------------- #

dnf config-manager --add-repo http://negativo17.org/repos/fedora-nvidia.repo

# -------------------------------------------------------------------------------------------------------------------- #
# Script: Upgrade OS.
# -------------------------------------------------------------------------------------------------------------------- #

dnf upgrade -y

# -------------------------------------------------------------------------------------------------------------------- #
# Script: Install NVIDIA driver.
# -------------------------------------------------------------------------------------------------------------------- #

dnf install -y ${srvPkgApps}
dnf upgrade -y

# -------------------------------------------------------------------------------------------------------------------- #
# Script: Set graphical mode.
# -------------------------------------------------------------------------------------------------------------------- #

#systemctl set-default graphical.target

# -------------------------------------------------------------------------------------------------------------------- #
# Script: Exit.
# -------------------------------------------------------------------------------------------------------------------- #

exit 0
